\begin{figure}
  \newcommand{\markersize}{6pt}
  \catcode`\_=12 % category other
  \begin{tikzpicture}
    \begin{axis}[
        axis equal image,
        axis x line* = top,
        axis line style = {draw = none},
        enlarge x limits = {abs = \markersize},
        enlarge y limits = {abs = \markersize},
        height = 4in,
        width = 4in,
        mark size = \markersize,
        scatter,
        only marks,
        mark = square*,
        scatter/use mapped color = {draw opacity = 0, fill = mapped color},
        colormap/viridis,
        colorbar,
        point meta min=0,
        point meta max=1,
        y dir = reverse,
        grid = minor,
        symbolic x coords = {{day,hour,weekhour,wind_speed_max,wind_speed_avg,wind_direction,temperature,humidity,pressure,bikes,bikes_avg_full,bikes_avg_short,bikes_3h,bikes_3h_diff_avg_full,bikes_3h_diff_avg_short}},
        symbolic y coords = {{day,hour,weekhour,wind_speed_max,wind_speed_avg,wind_direction,temperature,humidity,pressure,bikes,bikes_avg_full,bikes_avg_short,bikes_3h,bikes_3h_diff_avg_full,bikes_3h_diff_avg_short}},
        xtick = data,
        ytick = data,
        xticklabel = \texttt{\tick},
        yticklabel = \texttt{\tick},
        every tick label/.append style={font=\small},
        x tick style = {draw = none},
        y tick style = {draw = none},
        x tick label style = {rotate = 90, anchor = west},
        colorbar horizontal,
        colorbar style = {
            axis line style = {draw = none},
            height = 12pt,
            xlabel = {Pearson correlation coefficient},
            xtick style={draw = none},
          }
      ]
      \addplot [
        point meta = explicit,
      ] table [
          col sep = comma,
          x = x,
          y = y,
          meta = value,
        ] {../more_bikes/analysis/csv/correlation.csv};
    \end{axis}
  \end{tikzpicture}
  \catcode`\_=8 % category subscript
  \caption{The Pearson correlation coefficients between pairs of the quantitative features and the target variable (\texttt{bikes}).
    The ordering follows \cref{tab:features}.
    Features that have zero variance for the case of (a) separate models for each station
    are excluded (\cref{sec:feature-selection}).
    The \texttt{timestamp} feature is also excluded because it is naturally correlated with
    the other temporal features.
  }
  \label{fig:correlations}
\end{figure}
